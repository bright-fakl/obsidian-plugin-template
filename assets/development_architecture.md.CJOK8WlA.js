import{_ as n,c as a,o as e,ae as l}from"./chunks/framework.HX7xtU93.js";const b=JSON.parse('{"title":"Plugin Architecture","description":"","frontmatter":{},"headers":[],"relativePath":"development/architecture.md","filePath":"development/architecture.md"}'),p={name:"development/architecture.md"};function o(t,s,r,i,c,E){return e(),a("div",null,[...s[0]||(s[0]=[l(`<h1 id="plugin-architecture" tabindex="-1">Plugin Architecture <a class="header-anchor" href="#plugin-architecture" aria-label="Permalink to &quot;Plugin Architecture&quot;">​</a></h1><p>This document explains the architecture and design patterns used in this Obsidian plugin template.</p><h2 id="table-of-contents" tabindex="-1">Table of Contents <a class="header-anchor" href="#table-of-contents" aria-label="Permalink to &quot;Table of Contents&quot;">​</a></h2><ol><li><a href="#overview">Overview</a></li><li><a href="#architecture-layers">Architecture Layers</a></li><li><a href="#file-structure">File Structure</a></li><li><a href="#core-components">Core Components</a></li><li><a href="#data-flow">Data Flow</a></li><li><a href="#design-patterns">Design Patterns</a></li><li><a href="#extension-points">Extension Points</a></li></ol><h2 id="overview" tabindex="-1">Overview <a class="header-anchor" href="#overview" aria-label="Permalink to &quot;Overview&quot;">​</a></h2><p>This plugin follows a <strong>layered architecture</strong> with clear separation of concerns:</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>┌─────────────────────────────────────┐</span></span>
<span class="line"><span>│     Obsidian Application            │</span></span>
<span class="line"><span>│  (Provides: Vault, Workspace, etc.) │</span></span>
<span class="line"><span>└─────────────────────────────────────┘</span></span>
<span class="line"><span>                 ↕</span></span>
<span class="line"><span>┌─────────────────────────────────────┐</span></span>
<span class="line"><span>│        Plugin Layer                 │</span></span>
<span class="line"><span>│  - Plugin lifecycle (main.ts)       │</span></span>
<span class="line"><span>│  - Command registration             │</span></span>
<span class="line"><span>│  - Event handling                   │</span></span>
<span class="line"><span>└─────────────────────────────────────┘</span></span>
<span class="line"><span>                 ↕</span></span>
<span class="line"><span>┌─────────────────────────────────────┐</span></span>
<span class="line"><span>│      Settings Layer                 │</span></span>
<span class="line"><span>│  - Settings schema                  │</span></span>
<span class="line"><span>│  - Settings persistence             │</span></span>
<span class="line"><span>│  - Settings UI                      │</span></span>
<span class="line"><span>└─────────────────────────────────────┘</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h2 id="architecture-layers" tabindex="-1">Architecture Layers <a class="header-anchor" href="#architecture-layers" aria-label="Permalink to &quot;Architecture Layers&quot;">​</a></h2><h3 id="_1-plugin-layer-src-main-ts" tabindex="-1">1. Plugin Layer (<code>src/main.ts</code>) <a class="header-anchor" href="#_1-plugin-layer-src-main-ts" aria-label="Permalink to &quot;1. Plugin Layer (\`src/main.ts\`)&quot;">​</a></h3><p><strong>Responsibilities:</strong></p><ul><li>Plugin lifecycle management (<code>onload</code>, <code>onunload</code>)</li><li>Command registration</li><li>Event handler registration</li><li>Integration with Obsidian API</li></ul><p><strong>Key Methods:</strong></p><ul><li><code>onload()</code> - Initialize plugin, register commands, load settings</li><li><code>onunload()</code> - Cleanup resources</li><li><code>loadSettings()</code> - Load settings from disk</li><li><code>saveSettings()</code> - Persist settings to disk</li></ul><h3 id="_2-settings-layer-src-settings" tabindex="-1">2. Settings Layer (<code>src/settings/</code>) <a class="header-anchor" href="#_2-settings-layer-src-settings" aria-label="Permalink to &quot;2. Settings Layer (\`src/settings/\`)&quot;">​</a></h3><p><strong>Components:</strong></p><ul><li><strong>plugin-settings.ts</strong> - Settings schema, defaults, and migration logic</li><li><strong>settings-tab.ts</strong> - Settings UI using Obsidian&#39;s Setting API</li></ul><p><strong>Responsibilities:</strong></p><ul><li>Define plugin configuration schema</li><li>Provide default values</li><li>Handle settings migration across versions</li><li>Render settings UI</li></ul><h3 id="_3-business-logic-layer" tabindex="-1">3. Business Logic Layer <a class="header-anchor" href="#_3-business-logic-layer" aria-label="Permalink to &quot;3. Business Logic Layer&quot;">​</a></h3><p><strong>Location:</strong> Plugin methods in <code>main.ts</code> (or separate files for complex plugins)</p><p><strong>Responsibilities:</strong></p><ul><li>Core plugin functionality</li><li>Text transformation logic</li><li>Data processing</li></ul><p><strong>Example:</strong></p><div class="language-typescript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#E1E4E8;">private </span><span style="color:#B392F0;">transformText</span><span style="color:#E1E4E8;">(text: string, mode: TransformMode): string {</span></span>
<span class="line"><span style="color:#6A737D;">  // Business logic here</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="file-structure" tabindex="-1">File Structure <a class="header-anchor" href="#file-structure" aria-label="Permalink to &quot;File Structure&quot;">​</a></h2><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>src/</span></span>
<span class="line"><span>├── main.ts                  # Plugin entry point</span></span>
<span class="line"><span>└── settings/</span></span>
<span class="line"><span>    ├── plugin-settings.ts   # Settings schema and defaults</span></span>
<span class="line"><span>    └── settings-tab.ts      # Settings UI</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="main-plugin-file-src-main-ts" tabindex="-1">Main Plugin File (<code>src/main.ts</code>) <a class="header-anchor" href="#main-plugin-file-src-main-ts" aria-label="Permalink to &quot;Main Plugin File (\`src/main.ts\`)&quot;">​</a></h3><div class="language-typescript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">export</span><span style="color:#F97583;"> default</span><span style="color:#F97583;"> class</span><span style="color:#B392F0;"> ExamplePlugin</span><span style="color:#F97583;"> extends</span><span style="color:#B392F0;"> Plugin</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#FFAB70;">  settings</span><span style="color:#F97583;">!:</span><span style="color:#B392F0;"> ExamplePluginSettings</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">  async</span><span style="color:#B392F0;"> onload</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#6A737D;">    // 1. Load settings</span></span>
<span class="line"><span style="color:#F97583;">    await</span><span style="color:#79B8FF;"> this</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">loadSettings</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">    // 2. Register UI elements</span></span>
<span class="line"><span style="color:#79B8FF;">    this</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">addSettingTab</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">new</span><span style="color:#B392F0;"> ExamplePluginSettingsTab</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.app, </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">    // 3. Register commands</span></span>
<span class="line"><span style="color:#79B8FF;">    this</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">addCommand</span><span style="color:#E1E4E8;">({ </span><span style="color:#6A737D;">/* ... */</span><span style="color:#E1E4E8;"> });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">    // 4. Register event handlers (if needed)</span></span>
<span class="line"><span style="color:#6A737D;">    // this.registerEvent(/* ... */);</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">  async</span><span style="color:#B392F0;"> onunload</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#6A737D;">    // Cleanup code</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">  // Helper methods</span></span>
<span class="line"><span style="color:#F97583;">  private</span><span style="color:#B392F0;"> transformText</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">text</span><span style="color:#F97583;">:</span><span style="color:#79B8FF;"> string</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">mode</span><span style="color:#F97583;">:</span><span style="color:#79B8FF;"> string</span><span style="color:#E1E4E8;">)</span><span style="color:#F97583;">:</span><span style="color:#79B8FF;"> string</span><span style="color:#E1E4E8;"> { </span><span style="color:#6A737D;">/* ... */</span><span style="color:#E1E4E8;"> }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">  async</span><span style="color:#B392F0;"> loadSettings</span><span style="color:#E1E4E8;">() { </span><span style="color:#6A737D;">/* ... */</span><span style="color:#E1E4E8;"> }</span></span>
<span class="line"><span style="color:#F97583;">  async</span><span style="color:#B392F0;"> saveSettings</span><span style="color:#E1E4E8;">() { </span><span style="color:#6A737D;">/* ... */</span><span style="color:#E1E4E8;"> }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h3 id="settings-schema-src-settings-plugin-settings-ts" tabindex="-1">Settings Schema (<code>src/settings/plugin-settings.ts</code>) <a class="header-anchor" href="#settings-schema-src-settings-plugin-settings-ts" aria-label="Permalink to &quot;Settings Schema (\`src/settings/plugin-settings.ts\`)&quot;">​</a></h3><div class="language-typescript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">export</span><span style="color:#F97583;"> interface</span><span style="color:#B392F0;"> ExamplePluginSettings</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#6A737D;">  // Define your settings here</span></span>
<span class="line"><span style="color:#FFAB70;">  transformMode</span><span style="color:#F97583;">:</span><span style="color:#9ECBFF;"> &#39;uppercase&#39;</span><span style="color:#F97583;"> |</span><span style="color:#9ECBFF;"> &#39;lowercase&#39;</span><span style="color:#F97583;"> |</span><span style="color:#9ECBFF;"> &#39;title&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#FFAB70;">  showNotices</span><span style="color:#F97583;">:</span><span style="color:#79B8FF;"> boolean</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#F97583;"> const</span><span style="color:#79B8FF;"> DEFAULT_SETTINGS</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> ExamplePluginSettings</span><span style="color:#F97583;"> =</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#6A737D;">  // Default values</span></span>
<span class="line"><span style="color:#E1E4E8;">  transformMode: </span><span style="color:#9ECBFF;">&#39;uppercase&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  showNotices: </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#F97583;"> function</span><span style="color:#B392F0;"> migrateSettings</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">settings</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> ExamplePluginSettings</span><span style="color:#E1E4E8;">)</span><span style="color:#F97583;">:</span><span style="color:#79B8FF;"> void</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#6A737D;">  // Handle settings migration when schema changes</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="settings-ui-src-settings-settings-tab-ts" tabindex="-1">Settings UI (<code>src/settings/settings-tab.ts</code>) <a class="header-anchor" href="#settings-ui-src-settings-settings-tab-ts" aria-label="Permalink to &quot;Settings UI (\`src/settings/settings-tab.ts\`)&quot;">​</a></h3><div class="language-typescript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">export</span><span style="color:#F97583;"> class</span><span style="color:#B392F0;"> ExamplePluginSettingsTab</span><span style="color:#F97583;"> extends</span><span style="color:#B392F0;"> PluginSettingTab</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#FFAB70;">  plugin</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> ExamplePlugin</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">  display</span><span style="color:#E1E4E8;">()</span><span style="color:#F97583;">:</span><span style="color:#79B8FF;"> void</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#F97583;">    const</span><span style="color:#E1E4E8;"> { </span><span style="color:#79B8FF;">containerEl</span><span style="color:#E1E4E8;"> } </span><span style="color:#F97583;">=</span><span style="color:#79B8FF;"> this</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">    containerEl.</span><span style="color:#B392F0;">empty</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">    // Create settings UI using Obsidian&#39;s Setting API</span></span>
<span class="line"><span style="color:#F97583;">    new</span><span style="color:#B392F0;"> Setting</span><span style="color:#E1E4E8;">(containerEl)</span></span>
<span class="line"><span style="color:#E1E4E8;">      .</span><span style="color:#B392F0;">setName</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;Setting name&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">      .</span><span style="color:#B392F0;">setDesc</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;Setting description&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">      .</span><span style="color:#B392F0;">addDropdown</span><span style="color:#E1E4E8;">(</span><span style="color:#6A737D;">/* ... */</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="core-components" tabindex="-1">Core Components <a class="header-anchor" href="#core-components" aria-label="Permalink to &quot;Core Components&quot;">​</a></h2><h3 id="plugin-class" tabindex="-1">Plugin Class <a class="header-anchor" href="#plugin-class" aria-label="Permalink to &quot;Plugin Class&quot;">​</a></h3><p>Extends <code>Plugin</code> from Obsidian API.</p><p><strong>Properties:</strong></p><ul><li><code>app: App</code> - Obsidian app instance (inherited)</li><li><code>settings: ExamplePluginSettings</code> - Plugin settings</li><li><code>manifest: PluginManifest</code> - Plugin metadata (inherited)</li></ul><p><strong>Methods:</strong></p><ul><li><code>onload(): Promise&lt;void&gt;</code> - Initialize plugin</li><li><code>onunload(): void</code> - Cleanup</li><li><code>loadSettings(): Promise&lt;void&gt;</code> - Load settings</li><li><code>saveSettings(): Promise&lt;void&gt;</code> - Save settings</li></ul><h3 id="settings-tab" tabindex="-1">Settings Tab <a class="header-anchor" href="#settings-tab" aria-label="Permalink to &quot;Settings Tab&quot;">​</a></h3><p>Extends <code>PluginSettingTab</code> from Obsidian API.</p><p><strong>Responsibilities:</strong></p><ul><li>Render settings UI</li><li>Handle user input</li><li>Update plugin settings</li><li>Trigger settings save</li></ul><h2 id="data-flow" tabindex="-1">Data Flow <a class="header-anchor" href="#data-flow" aria-label="Permalink to &quot;Data Flow&quot;">​</a></h2><h3 id="command-execution-flow" tabindex="-1">Command Execution Flow <a class="header-anchor" href="#command-execution-flow" aria-label="Permalink to &quot;Command Execution Flow&quot;">​</a></h3><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>User activates command</span></span>
<span class="line"><span>        ↓</span></span>
<span class="line"><span>Command callback executed</span></span>
<span class="line"><span>        ↓</span></span>
<span class="line"><span>Read current settings</span></span>
<span class="line"><span>        ↓</span></span>
<span class="line"><span>Execute business logic</span></span>
<span class="line"><span>        ↓</span></span>
<span class="line"><span>Update Obsidian state</span></span>
<span class="line"><span>        ↓</span></span>
<span class="line"><span>Show notification (if enabled)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="settings-update-flow" tabindex="-1">Settings Update Flow <a class="header-anchor" href="#settings-update-flow" aria-label="Permalink to &quot;Settings Update Flow&quot;">​</a></h3><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>User changes setting in UI</span></span>
<span class="line"><span>        ↓</span></span>
<span class="line"><span>Setting component onChange callback</span></span>
<span class="line"><span>        ↓</span></span>
<span class="line"><span>Update plugin.settings object</span></span>
<span class="line"><span>        ↓</span></span>
<span class="line"><span>Call plugin.saveSettings()</span></span>
<span class="line"><span>        ↓</span></span>
<span class="line"><span>Settings persisted to disk</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="plugin-initialization-flow" tabindex="-1">Plugin Initialization Flow <a class="header-anchor" href="#plugin-initialization-flow" aria-label="Permalink to &quot;Plugin Initialization Flow&quot;">​</a></h3><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>Obsidian loads plugin</span></span>
<span class="line"><span>        ↓</span></span>
<span class="line"><span>Call onload()</span></span>
<span class="line"><span>        ↓</span></span>
<span class="line"><span>Load settings from disk</span></span>
<span class="line"><span>        ↓</span></span>
<span class="line"><span>Migrate settings (if needed)</span></span>
<span class="line"><span>        ↓</span></span>
<span class="line"><span>Register settings tab</span></span>
<span class="line"><span>        ↓</span></span>
<span class="line"><span>Register commands</span></span>
<span class="line"><span>        ↓</span></span>
<span class="line"><span>Register event handlers</span></span>
<span class="line"><span>        ↓</span></span>
<span class="line"><span>Plugin ready</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="design-patterns" tabindex="-1">Design Patterns <a class="header-anchor" href="#design-patterns" aria-label="Permalink to &quot;Design Patterns&quot;">​</a></h2><h3 id="_1-singleton-pattern" tabindex="-1">1. Singleton Pattern <a class="header-anchor" href="#_1-singleton-pattern" aria-label="Permalink to &quot;1. Singleton Pattern&quot;">​</a></h3><p>The plugin class is a singleton managed by Obsidian.</p><div class="language-typescript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">export</span><span style="color:#F97583;"> default</span><span style="color:#F97583;"> class</span><span style="color:#B392F0;"> ExamplePlugin</span><span style="color:#F97583;"> extends</span><span style="color:#B392F0;"> Plugin</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#6A737D;">  // Only one instance exists</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_2-strategy-pattern" tabindex="-1">2. Strategy Pattern <a class="header-anchor" href="#_2-strategy-pattern" aria-label="Permalink to &quot;2. Strategy Pattern&quot;">​</a></h3><p>Text transformation modes use strategy pattern:</p><div class="language-typescript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#E1E4E8;">private </span><span style="color:#B392F0;">transformText</span><span style="color:#E1E4E8;">(text: string, mode: TransformMode): string {</span></span>
<span class="line"><span style="color:#F97583;">  switch</span><span style="color:#E1E4E8;"> (mode) {</span></span>
<span class="line"><span style="color:#F97583;">    case</span><span style="color:#9ECBFF;"> &#39;uppercase&#39;</span><span style="color:#E1E4E8;">: </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> text.</span><span style="color:#B392F0;">toUpperCase</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#F97583;">    case</span><span style="color:#9ECBFF;"> &#39;lowercase&#39;</span><span style="color:#E1E4E8;">: </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> text.</span><span style="color:#B392F0;">toLowerCase</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#F97583;">    case</span><span style="color:#9ECBFF;"> &#39;title&#39;</span><span style="color:#E1E4E8;">: </span><span style="color:#F97583;">return</span><span style="color:#79B8FF;"> this</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">toTitleCase</span><span style="color:#E1E4E8;">(text);</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="_3-observer-pattern" tabindex="-1">3. Observer Pattern <a class="header-anchor" href="#_3-observer-pattern" aria-label="Permalink to &quot;3. Observer Pattern&quot;">​</a></h3><p>Obsidian&#39;s event system uses observer pattern:</p><div class="language-typescript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">registerEvent</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#79B8FF;">  this</span><span style="color:#E1E4E8;">.app.workspace.</span><span style="color:#B392F0;">on</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;file-open&#39;</span><span style="color:#E1E4E8;">, (</span><span style="color:#FFAB70;">file</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#6A737D;">    // React to file open event</span></span>
<span class="line"><span style="color:#E1E4E8;">  })</span></span>
<span class="line"><span style="color:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_4-factory-pattern" tabindex="-1">4. Factory Pattern <a class="header-anchor" href="#_4-factory-pattern" aria-label="Permalink to &quot;4. Factory Pattern&quot;">​</a></h3><p>Settings migration uses factory pattern:</p><div class="language-typescript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">export</span><span style="color:#F97583;"> function</span><span style="color:#B392F0;"> migrateSettings</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">settings</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> ExamplePluginSettings</span><span style="color:#E1E4E8;">)</span><span style="color:#F97583;">:</span><span style="color:#79B8FF;"> void</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#6A737D;">  // Transform old settings format to new format</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="extension-points" tabindex="-1">Extension Points <a class="header-anchor" href="#extension-points" aria-label="Permalink to &quot;Extension Points&quot;">​</a></h2><h3 id="adding-new-commands" tabindex="-1">Adding New Commands <a class="header-anchor" href="#adding-new-commands" aria-label="Permalink to &quot;Adding New Commands&quot;">​</a></h3><div class="language-typescript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;">// In onload()</span></span>
<span class="line"><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">addCommand</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">  id: </span><span style="color:#9ECBFF;">&#39;your-command-id&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  name: </span><span style="color:#9ECBFF;">&#39;Your Command Name&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#B392F0;">  callback</span><span style="color:#E1E4E8;">: () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#6A737D;">    // Command logic</span></span>
<span class="line"><span style="color:#E1E4E8;">  },</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="adding-new-settings" tabindex="-1">Adding New Settings <a class="header-anchor" href="#adding-new-settings" aria-label="Permalink to &quot;Adding New Settings&quot;">​</a></h3><ol><li>Update interface in <code>plugin-settings.ts</code>:</li></ol><div class="language-typescript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">export</span><span style="color:#F97583;"> interface</span><span style="color:#B392F0;"> ExamplePluginSettings</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#FFAB70;">  transformMode</span><span style="color:#F97583;">:</span><span style="color:#9ECBFF;"> &#39;uppercase&#39;</span><span style="color:#F97583;"> |</span><span style="color:#9ECBFF;"> &#39;lowercase&#39;</span><span style="color:#F97583;"> |</span><span style="color:#9ECBFF;"> &#39;title&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#FFAB70;">  showNotices</span><span style="color:#F97583;">:</span><span style="color:#79B8FF;"> boolean</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#FFAB70;">  newSetting</span><span style="color:#F97583;">:</span><span style="color:#79B8FF;"> string</span><span style="color:#E1E4E8;">; </span><span style="color:#6A737D;">// Add new setting</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ol start="2"><li>Update defaults:</li></ol><div class="language-typescript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">export</span><span style="color:#F97583;"> const</span><span style="color:#79B8FF;"> DEFAULT_SETTINGS</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> ExamplePluginSettings</span><span style="color:#F97583;"> =</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  transformMode: </span><span style="color:#9ECBFF;">&#39;uppercase&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  showNotices: </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  newSetting: </span><span style="color:#9ECBFF;">&#39;default value&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// Add default</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ol start="3"><li>Add UI in <code>settings-tab.ts</code>:</li></ol><div class="language-typescript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">new</span><span style="color:#B392F0;"> Setting</span><span style="color:#E1E4E8;">(containerEl)</span></span>
<span class="line"><span style="color:#E1E4E8;">  .</span><span style="color:#B392F0;">setName</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;New Setting&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">  .</span><span style="color:#B392F0;">setDesc</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;Description&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">  .</span><span style="color:#B392F0;">addText</span><span style="color:#E1E4E8;">((</span><span style="color:#FFAB70;">text</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    text</span></span>
<span class="line"><span style="color:#E1E4E8;">      .</span><span style="color:#B392F0;">setValue</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.plugin.settings.newSetting)</span></span>
<span class="line"><span style="color:#E1E4E8;">      .</span><span style="color:#B392F0;">onChange</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">async</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">value</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#79B8FF;">        this</span><span style="color:#E1E4E8;">.plugin.settings.newSetting </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> value;</span></span>
<span class="line"><span style="color:#F97583;">        await</span><span style="color:#79B8FF;"> this</span><span style="color:#E1E4E8;">.plugin.</span><span style="color:#B392F0;">saveSettings</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">      })</span></span>
<span class="line"><span style="color:#E1E4E8;">  );</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="adding-custom-views" tabindex="-1">Adding Custom Views <a class="header-anchor" href="#adding-custom-views" aria-label="Permalink to &quot;Adding Custom Views&quot;">​</a></h3><p>For plugins that need sidebar views:</p><ol><li>Create view file (<code>src/view.ts</code>):</li></ol><div class="language-typescript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">export</span><span style="color:#F97583;"> const</span><span style="color:#79B8FF;"> VIEW_TYPE_EXAMPLE</span><span style="color:#F97583;"> =</span><span style="color:#9ECBFF;"> &#39;example-view&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#F97583;"> class</span><span style="color:#B392F0;"> ExampleView</span><span style="color:#F97583;"> extends</span><span style="color:#B392F0;"> ItemView</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#B392F0;">  getViewType</span><span style="color:#E1E4E8;">() { </span><span style="color:#F97583;">return</span><span style="color:#79B8FF;"> VIEW_TYPE_EXAMPLE</span><span style="color:#E1E4E8;">; }</span></span>
<span class="line"><span style="color:#B392F0;">  getDisplayText</span><span style="color:#E1E4E8;">() { </span><span style="color:#F97583;">return</span><span style="color:#9ECBFF;"> &#39;Example View&#39;</span><span style="color:#E1E4E8;">; }</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#F97583;">  async</span><span style="color:#B392F0;"> onOpen</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#6A737D;">    // Render view</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><ol start="2"><li>Register in <code>main.ts</code>:</li></ol><div class="language-typescript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;">// In onload()</span></span>
<span class="line"><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">registerView</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#79B8FF;">  VIEW_TYPE_EXAMPLE</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  (</span><span style="color:#FFAB70;">leaf</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#F97583;"> new</span><span style="color:#B392F0;"> ExampleView</span><span style="color:#E1E4E8;">(leaf)</span></span>
<span class="line"><span style="color:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="adding-event-handlers" tabindex="-1">Adding Event Handlers <a class="header-anchor" href="#adding-event-handlers" aria-label="Permalink to &quot;Adding Event Handlers&quot;">​</a></h3><div class="language-typescript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;">// In onload()</span></span>
<span class="line"><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">registerEvent</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#79B8FF;">  this</span><span style="color:#E1E4E8;">.app.workspace.</span><span style="color:#B392F0;">on</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;file-open&#39;</span><span style="color:#E1E4E8;">, (</span><span style="color:#FFAB70;">file</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#F97583;">    if</span><span style="color:#E1E4E8;"> (file) {</span></span>
<span class="line"><span style="color:#6A737D;">      // Handle file open</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">  })</span></span>
<span class="line"><span style="color:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="best-practices" tabindex="-1">Best Practices <a class="header-anchor" href="#best-practices" aria-label="Permalink to &quot;Best Practices&quot;">​</a></h2><h3 id="_1-always-clean-up" tabindex="-1">1. Always Clean Up <a class="header-anchor" href="#_1-always-clean-up" aria-label="Permalink to &quot;1. Always Clean Up&quot;">​</a></h3><p>Unregister event listeners and views in <code>onunload()</code>:</p><div class="language-typescript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#E1E4E8;">async </span><span style="color:#B392F0;">onunload</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#6A737D;">  // Detach custom views</span></span>
<span class="line"><span style="color:#79B8FF;">  this</span><span style="color:#E1E4E8;">.app.workspace.</span><span style="color:#B392F0;">detachLeavesOfType</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">VIEW_TYPE_EXAMPLE</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_2-use-type-safety" tabindex="-1">2. Use Type Safety <a class="header-anchor" href="#_2-use-type-safety" aria-label="Permalink to &quot;2. Use Type Safety&quot;">​</a></h3><p>Define TypeScript interfaces for all data structures:</p><div class="language-typescript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">interface</span><span style="color:#B392F0;"> CommandOptions</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#FFAB70;">  id</span><span style="color:#F97583;">:</span><span style="color:#79B8FF;"> string</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#FFAB70;">  name</span><span style="color:#F97583;">:</span><span style="color:#79B8FF;"> string</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#B392F0;">  callback</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#79B8FF;"> void</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_3-handle-errors-gracefully" tabindex="-1">3. Handle Errors Gracefully <a class="header-anchor" href="#_3-handle-errors-gracefully" aria-label="Permalink to &quot;3. Handle Errors Gracefully&quot;">​</a></h3><div class="language-typescript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">try</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#6A737D;">  // Plugin logic</span></span>
<span class="line"><span style="color:#E1E4E8;">} </span><span style="color:#F97583;">catch</span><span style="color:#E1E4E8;"> (error) {</span></span>
<span class="line"><span style="color:#F97583;">  new</span><span style="color:#B392F0;"> Notice</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;Error: &#39;</span><span style="color:#F97583;"> +</span><span style="color:#E1E4E8;"> error.message);</span></span>
<span class="line"><span style="color:#E1E4E8;">  console.</span><span style="color:#B392F0;">error</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;[ExamplePlugin]&#39;</span><span style="color:#E1E4E8;">, error);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_4-debounce-expensive-operations" tabindex="-1">4. Debounce Expensive Operations <a class="header-anchor" href="#_4-debounce-expensive-operations" aria-label="Permalink to &quot;4. Debounce Expensive Operations&quot;">​</a></h3><div class="language-typescript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { debounce } </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;obsidian&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#79B8FF;"> debouncedSave</span><span style="color:#F97583;"> =</span><span style="color:#B392F0;"> debounce</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">  () </span><span style="color:#F97583;">=&gt;</span><span style="color:#79B8FF;"> this</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">saveSettings</span><span style="color:#E1E4E8;">(),</span></span>
<span class="line"><span style="color:#79B8FF;">  500</span></span>
<span class="line"><span style="color:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_5-validate-user-input" tabindex="-1">5. Validate User Input <a class="header-anchor" href="#_5-validate-user-input" aria-label="Permalink to &quot;5. Validate User Input&quot;">​</a></h3><div class="language-typescript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">export</span><span style="color:#F97583;"> function</span><span style="color:#B392F0;"> migrateSettings</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">settings</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> ExamplePluginSettings</span><span style="color:#E1E4E8;">)</span><span style="color:#F97583;">:</span><span style="color:#79B8FF;"> void</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#F97583;">  const</span><span style="color:#79B8FF;"> validModes</span><span style="color:#F97583;"> =</span><span style="color:#E1E4E8;"> [</span><span style="color:#9ECBFF;">&#39;uppercase&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;lowercase&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;title&#39;</span><span style="color:#E1E4E8;">];</span></span>
<span class="line"><span style="color:#F97583;">  if</span><span style="color:#E1E4E8;"> (</span><span style="color:#F97583;">!</span><span style="color:#E1E4E8;">validModes.</span><span style="color:#B392F0;">includes</span><span style="color:#E1E4E8;">(settings.transformMode)) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    settings.transformMode </span><span style="color:#F97583;">=</span><span style="color:#79B8FF;"> DEFAULT_SETTINGS</span><span style="color:#E1E4E8;">.transformMode;</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="performance-considerations" tabindex="-1">Performance Considerations <a class="header-anchor" href="#performance-considerations" aria-label="Permalink to &quot;Performance Considerations&quot;">​</a></h2><h3 id="_1-lazy-loading" tabindex="-1">1. Lazy Loading <a class="header-anchor" href="#_1-lazy-loading" aria-label="Permalink to &quot;1. Lazy Loading&quot;">​</a></h3><p>Load heavy resources only when needed:</p><div class="language-typescript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#E1E4E8;">async </span><span style="color:#B392F0;">onload</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#6A737D;">  // Don&#39;t load heavy resources here</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">async </span><span style="color:#B392F0;">activateView</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#6A737D;">  // Load resources when view is activated</span></span>
<span class="line"><span style="color:#F97583;">  const</span><span style="color:#79B8FF;"> heavyData</span><span style="color:#F97583;"> =</span><span style="color:#F97583;"> await</span><span style="color:#79B8FF;"> this</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">loadHeavyData</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_2-caching" tabindex="-1">2. Caching <a class="header-anchor" href="#_2-caching" aria-label="Permalink to &quot;2. Caching&quot;">​</a></h3><p>Cache computed values:</p><div class="language-typescript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#E1E4E8;">private cache </span><span style="color:#F97583;">=</span><span style="color:#F97583;"> new</span><span style="color:#B392F0;"> Map</span><span style="color:#E1E4E8;">&lt;</span><span style="color:#79B8FF;">string</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">any</span><span style="color:#E1E4E8;">&gt;();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">getData</span><span style="color:#E1E4E8;">(key: string): any {</span></span>
<span class="line"><span style="color:#F97583;">  if</span><span style="color:#E1E4E8;"> (</span><span style="color:#F97583;">!</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.cache.</span><span style="color:#B392F0;">has</span><span style="color:#E1E4E8;">(key)) {</span></span>
<span class="line"><span style="color:#79B8FF;">    this</span><span style="color:#E1E4E8;">.cache.</span><span style="color:#B392F0;">set</span><span style="color:#E1E4E8;">(key, </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">computeData</span><span style="color:#E1E4E8;">(key));</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#F97583;">  return</span><span style="color:#79B8FF;"> this</span><span style="color:#E1E4E8;">.cache.</span><span style="color:#B392F0;">get</span><span style="color:#E1E4E8;">(key);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_3-async-operations" tabindex="-1">3. Async Operations <a class="header-anchor" href="#_3-async-operations" aria-label="Permalink to &quot;3. Async Operations&quot;">​</a></h3><p>Use async/await for I/O operations:</p><div class="language-typescript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#E1E4E8;">async </span><span style="color:#B392F0;">loadSettings</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#F97583;">  const</span><span style="color:#79B8FF;"> data</span><span style="color:#F97583;"> =</span><span style="color:#F97583;"> await</span><span style="color:#79B8FF;"> this</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">loadData</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#79B8FF;">  this</span><span style="color:#E1E4E8;">.settings </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Object.</span><span style="color:#B392F0;">assign</span><span style="color:#E1E4E8;">({}, </span><span style="color:#79B8FF;">DEFAULT_SETTINGS</span><span style="color:#E1E4E8;">, data);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="testing-strategy" tabindex="-1">Testing Strategy <a class="header-anchor" href="#testing-strategy" aria-label="Permalink to &quot;Testing Strategy&quot;">​</a></h2><h3 id="unit-tests" tabindex="-1">Unit Tests <a class="header-anchor" href="#unit-tests" aria-label="Permalink to &quot;Unit Tests&quot;">​</a></h3><p>Test business logic in isolation:</p><div class="language-typescript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#B392F0;">describe</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;transformText&#39;</span><span style="color:#E1E4E8;">, () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#B392F0;">  it</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;should convert to uppercase&#39;</span><span style="color:#E1E4E8;">, () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#F97583;">    const</span><span style="color:#79B8FF;"> result</span><span style="color:#F97583;"> =</span><span style="color:#E1E4E8;"> plugin.</span><span style="color:#B392F0;">transformText</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;hello&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;uppercase&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#B392F0;">    expect</span><span style="color:#E1E4E8;">(result).</span><span style="color:#B392F0;">toBe</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;HELLO&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">  });</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="integration-tests" tabindex="-1">Integration Tests <a class="header-anchor" href="#integration-tests" aria-label="Permalink to &quot;Integration Tests&quot;">​</a></h3><p>Test plugin integration with Obsidian:</p><div class="language-typescript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#B392F0;">describe</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;Plugin initialization&#39;</span><span style="color:#E1E4E8;">, () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#B392F0;">  it</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;should load settings on startup&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">async</span><span style="color:#E1E4E8;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#F97583;">    await</span><span style="color:#E1E4E8;"> plugin.</span><span style="color:#B392F0;">onload</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#B392F0;">    expect</span><span style="color:#E1E4E8;">(plugin.settings).</span><span style="color:#B392F0;">toBeDefined</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">  });</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="resources" tabindex="-1">Resources <a class="header-anchor" href="#resources" aria-label="Permalink to &quot;Resources&quot;">​</a></h2><ul><li><a href="https://github.com/obsidianmd/obsidian-api" target="_blank" rel="noreferrer">Obsidian Plugin API</a></li><li><a href="https://www.typescriptlang.org/docs/handbook/intro.html" target="_blank" rel="noreferrer">TypeScript Handbook</a></li><li><a href="https://docs.obsidian.md/Plugins/Getting+started/Build+a+plugin" target="_blank" rel="noreferrer">Obsidian Developer Docs</a></li></ul><h2 id="next-steps" tabindex="-1">Next Steps <a class="header-anchor" href="#next-steps" aria-label="Permalink to &quot;Next Steps&quot;">​</a></h2><ul><li>Review the <a href="/obsidian-example-plugin/development/testing.html">Testing Guide</a> for testing best practices</li><li>Explore the <a href="/obsidian-example-plugin/development/api.html">API Reference</a> for detailed API documentation</li><li>Check the <a href="/obsidian-example-plugin/development/contributing.html">Contributing Guide</a> to help improve the project</li></ul>`,115)])])}const y=n(p,[["render",o]]);export{b as __pageData,y as default};
